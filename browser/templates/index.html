<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html">
  <title>Topic and document browser</title>
  <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/style.css') }}"/>
</head>
<body>
    <div id="navigation">
        <select onChange="window.location.href=((this.value == 'topic cloud') ? '/topic_cloud.html' : (this.value == 'vocabulary') ? '/vocabulary.html' : '/')">
            <option selected="selected" disabled="disabled">Overview</option>
            <option>topic list</option>
            <option>topic cloud</option>
            <option>vocabulary</option>
        </select>
        -
        <select onChange="window.location.href='../topic/'+this.value.split(' ')[1].slice(0, -1)+'.html'">
            <option selected="selected" disabled="disabled">Select a topic to see details</option>
            {% for i in topic_ids %}
                <option>{{ i }}</option>
            {% endfor %}
        </select>
    </div>
    <div id="header">
        <h1>Topic and document browser</h1>
        <a href="https://github.com/warmlogic/TOM">Built using https://github.com/warmlogic/TOM</a>
    </div>
    <div id="wrap">
        <div id="left_column">
            <h2>Topics (top words)</h2>
            <ul>
                {% for topic in topic_ids %}
                    <li><a href="../topic/{{ loop.index - 1}}.html">{{ topic }}</a></li>
                {% endfor %}
            </ul>
        </div>
        <div id="right_column">
            <h2>Dataset and model details</h2>
            <ul>
                <li>Document count: {{ corpus_size }}</li>
                <li>Vocabulary size: {{ vocabulary_size }}</li>
                <li>Model type: {{ method }}</li>
                <li>Vectorization: {{ vectorization }}</li>
                <li>Number of topics: {{ num_topics }}</li>
            </ul>
        </div>
    </div>
    <div id="one_column">
        <div class="two_images">
            <p>Documents over time</p>
            <img src={{ url_for('static', filename=fig_docs_over_time_count) }}>
            <img src={{ url_for('static', filename=fig_docs_over_time_percent) }}>
        </div>
    </div>
    <div id="one_column">
        <div class="one_image_1000">
            <p>Barplot of average topic loadings, with 95% CI error bars</p>
            <img src={{ url_for('static', filename=fig_topic_barplot) }}>
        </div>
    </div>
    <!-- <div id="one_column">
        <div class="one_image_1400">
            <p>Heatmap of topic-topic correlation values (Pearson correlation coefficient)</p>
            <img src={{ url_for('static', filename=fig_topic_heatmap) }}>
        </div>
    </div> -->
    <div id="one_column">
            <div class="one_image_1400">
            <p>Hierarchically-clustered topic-topic correlation values (Pearson correlation coefficient)</p>
            <img src={{ url_for('static', filename=fig_topic_clustermap) }}>
        </div>
    </div>
    <div id="one_column">
        <div class="one_image_1200">
            <p>Topics over time: Count of documents above the threshold per year</p>
            <img src={{ url_for('static', filename=fig_topic_over_time_count) }}>
        </div>
    </div>
    <div id="one_column">
        <div class="one_image_1200">
            <p>Topics over time: Percent of documents above the threshold for each topic, per year. Each year across topics adds up to 100%. One document can contribute to multiple topics.</p>
            <img src={{ url_for('static', filename=fig_topic_over_time_percent) }}>
        </div>
    </div>
    <div id="one_column">
        <div class="one_image_1200">
            <p>Topics over time: For each topic (separately), of the documents above the threshold, plot the average topic loading for that year.</p>
            <img src={{ url_for('static', filename=fig_topic_over_time_loading) }}>
        </div>
    </div>
</body>
